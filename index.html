
<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏ó‡∏µ‡∏°‡πÄ‡∏ù‡πâ‡∏≤‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏™‡∏≠‡∏ö‡∏™‡∏ß‡∏ô‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡πá‡∏ß ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£</title>
    <link href="https://fonts.googleapis.com/css2?family=Anuphan:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'anuphan': ['Anuphan', 'sans-serif']
                    },
                    colors: {
                        'dark-green': '#1e3a2e',
                        'medium-green': '#2d5a3d',
                        'light-green': '#4a7c59'
                    }
                }
            }
        }
    </script>
</head>
<body class="font-anuphan bg-gray-100 min-h-screen">
    <!-- Login Page -->
    <div id="loginPage" class="min-h-screen flex items-center justify-center bg-gradient-to-br from-dark-green to-medium-green">
        <div class="bg-white p-8 rounded-lg shadow-2xl w-full max-w-md">
            <div class="text-center mb-8">
                <h1 class="text-2xl font-bold text-dark-green mb-2">‡∏ó‡∏µ‡∏°‡πÄ‡∏ù‡πâ‡∏≤‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏™‡∏≠‡∏ö‡∏™‡∏ß‡∏ô‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡πá‡∏ß</h1>
                <p class="text-gray-600">‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£</p>
            </div>
            <form id="loginForm" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</label>
                    <input type="text" id="username" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-medium-green" required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
                    <input type="password" id="password" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-medium-green" required>
                </div>
                <button type="submit" class="w-full bg-medium-green text-white py-2 px-4 rounded-md hover:bg-dark-green transition duration-200">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
            </form>
            <div id="loginError" class="mt-4 text-red-600 text-sm text-center hidden"></div>
            <div class="mt-6 text-xs text-gray-500 text-center">
                <p>‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ó‡∏î‡∏™‡∏≠‡∏ö:</p>
                <p>‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà: officer1 / pass123</p>
                <p>‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö: admin1 / admin123</p>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="hidden">
        <!-- Navigation -->
        <nav class="bg-dark-green text-white shadow-lg">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex justify-between items-center py-4">
                    <div class="flex items-center space-x-4">
                        <h1 class="text-xl font-bold">‡∏ó‡∏µ‡∏°‡πÄ‡∏ù‡πâ‡∏≤‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏™‡∏≠‡∏ö‡∏™‡∏ß‡∏ô‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡πá‡∏ß ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£</h1>
                    </div>
                    <div class="flex items-center space-x-4">
                        <span id="currentUser" class="text-sm"></span>
                        <button id="logoutBtn" class="bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-sm">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
                    </div>
                </div>
                <div class="flex space-x-1 pb-4" id="navTabs">
                    <!-- Navigation tabs will be populated by JavaScript -->
                </div>
            </div>
        </nav>

        <!-- Content Area -->
        <div class="max-w-7xl mx-auto px-4 py-6">
            <!-- Officer Dashboard -->
            <div id="officerDashboard" class="tab-content hidden">
                <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                    <h2 class="text-xl font-bold text-dark-green mb-6">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢‡∏ó‡∏µ‡∏° SRRT</h2>
                    <!-- Search and Filter Section -->
                    <div class="mb-6 bg-gray-50 p-4 rounded-lg">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</label>
                                <input type="text" id="officerSearch" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏à‡∏≤‡∏Å‡∏ä‡∏∑‡πà‡∏≠ ‡∏£‡∏´‡∏±‡∏™‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà ‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô..." class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-medium-green" onkeyup="searchOfficers()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</label>
                                <select id="orgFilter" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-medium-green" onchange="filterOfficers()">
                                    <option value="">‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏≠‡∏ö‡∏£‡∏°</label>
                                <select id="trainingFilter" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-medium-green" onchange="filterOfficers()">
                                    <option value="">‡∏ó‡∏∏‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</option>
                                    <option value="trained">‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏ö‡∏£‡∏°‡πÅ‡∏•‡πâ‡∏ß</option>
                                    <option value="not-trained">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏ö‡∏£‡∏°</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <!-- Organization blocks will be populated by JavaScript -->
                </div>
            </div>

            <!-- Team Management -->
            <div id="teamManagement" class="tab-content hidden">
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h2 class="text-xl font-bold text-dark-green mb-4">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡∏°</h2>
                    
                    <!-- Team Summary Section -->
                    <div class="bg-gradient-to-r from-blue-50 to-green-50 rounded-lg p-6 mb-6">
                        <h3 class="text-lg font-bold text-dark-green mb-4">‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡∏°</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="bg-white rounded-lg p-4 shadow-sm">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-gray-600 text-sm">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                                        <p class="text-2xl font-bold text-blue-600" id="teamTotalMembers">-</p>
                                        <p class="text-gray-500 text-sm">‡∏Ñ‡∏ô</p>
                                    </div>
                                    <div class="text-3xl opacity-70">üë•</div>
                                </div>
                            </div>
                            <div class="bg-white rounded-lg p-4 shadow-sm">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-gray-600 text-sm">‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏ö‡∏£‡∏°‡πÅ‡∏•‡πâ‡∏ß</p>
                                        <p class="text-2xl font-bold text-green-600" id="teamTrainedMembers">-</p>
                                        <p class="text-gray-500 text-sm">‡∏Ñ‡∏ô</p>
                                    </div>
                                    <div class="text-3xl opacity-70">‚úÖ</div>
                                </div>
                            </div>
                            <div class="bg-white rounded-lg p-4 shadow-sm">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-gray-600 text-sm">‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏ö‡∏£‡∏°</p>
                                        <p class="text-2xl font-bold text-purple-600" id="teamTrainingPercentage">-</p>
                                        <p class="text-gray-500 text-sm">%</p>
                                    </div>
                                    <div class="text-3xl opacity-70">üìä</div>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-sm text-gray-600">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏£‡∏≠‡∏ö‡∏£‡∏°</span>
                                <span class="text-sm font-medium text-gray-700" id="teamProgressText">-</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-3">
                                <div class="bg-gradient-to-r from-green-400 to-green-600 h-3 rounded-full transition-all duration-500" id="teamProgressBar" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700">‡∏£‡∏´‡∏±‡∏™‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</label>
                            <p class="text-lg font-semibold text-dark-green">BMA001</p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</label>
                            <p class="text-lg font-semibold text-dark-green">‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏Ç‡∏ï‡∏ö‡∏≤‡∏á‡∏£‡∏±‡∏Å</p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label>
                            <input type="text" id="editPhone" value="02-234-5678" class="w-full px-3 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-medium-green">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">‡πÇ‡∏ó‡∏£‡∏™‡∏≤‡∏£</label>
                            <input type="text" id="editFax" value="02-234-5679" class="w-full px-3 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-medium-green">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
                            <input type="email" id="editEmail" value="bangrak@bma.go.th" class="w-full px-3 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-medium-green">
                        </div>
                    </div>
                    <button onclick="saveOrgInfo()" class="bg-medium-green text-white px-4 py-2 rounded hover:bg-dark-green mb-6">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</button>
                    
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-bold text-dark-green">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏ô‡∏ó‡∏µ‡∏°</h3>
                        <button onclick="showAddMemberModal()" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏´‡∏°‡πà</button>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="min-w-full bg-white border border-gray-200">
                            <thead class="bg-medium-green text-white">
                                <tr>
                                    <th class="px-4 py-2 text-left">‡∏£‡∏´‡∏±‡∏™‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</th>
                                    <th class="px-4 py-2 text-left">‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•</th>
                                    <th class="px-4 py-2 text-left">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</th>
                                    <th class="px-4 py-2 text-left">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</th>
                                    <th class="px-4 py-2 text-left">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</th>
                                    <th class="px-4 py-2 text-center">‡∏Å‡∏≤‡∏£‡∏≠‡∏ö‡∏£‡∏°</th>
                                    <th class="px-4 py-2 text-center">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                                </tr>
                            </thead>
                            <tbody id="teamTableBody">
                                <!-- Team members will be populated here -->
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Confirmation Section -->
                    <div class="mt-6 p-4 bg-gray-50 rounded-lg">
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="text-lg font-semibold text-dark-green">‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h4>
                                <p class="text-sm text-gray-600 mt-1">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡∏°‡πÅ‡∏•‡∏∞‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</p>
                            </div>
                            <div class="flex space-x-3">
                                <div class="text-center">
                                    <div class="text-sm text-gray-600">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡∏°:</div>
                                    <span id="teamConfirmStatus" class="inline-block px-3 py-1 rounded text-sm font-medium">-</span>
                                </div>
                                <div class="text-center">
                                    <div class="text-sm text-gray-600">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô:</div>
                                    <span id="orgConfirmStatus" class="inline-block px-3 py-1 rounded text-sm font-medium">-</span>
                                </div>
                                <button id="confirmTeamDataBtn" onclick="confirmTeamData()" class="bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed">
                                    ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>



            <!-- Admin - Summary Report -->
            <div id="summaryReport" class="tab-content hidden">
                <div class="space-y-6">
                    <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏ó‡∏µ‡∏° SRRT ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£ -->
                    <div class="bg-white rounded-lg shadow-lg p-6">
                        <h2 class="text-xl font-bold text-dark-green mb-6">‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏ó‡∏µ‡∏° SRRT ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="bg-gradient-to-r from-blue-500 to-blue-600 text-white p-6 rounded-lg">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-blue-100 text-sm">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡∏°</p>
                                        <p class="text-3xl font-bold" id="totalTeams">-</p>
                                        <p class="text-blue-100 text-sm">‡∏ó‡∏µ‡∏°</p>
                                    </div>
                                    <div class="text-4xl opacity-80">üè¢</div>
                                </div>
                            </div>
                            <div class="bg-gradient-to-r from-green-500 to-green-600 text-white p-6 rounded-lg">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-green-100 text-sm">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</p>
                                        <p class="text-3xl font-bold" id="totalOfficers">-</p>
                                        <p class="text-green-100 text-sm">‡∏Ñ‡∏ô</p>
                                    </div>
                                    <div class="text-4xl opacity-80">üë•</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô -->
                    <div class="bg-white rounded-lg shadow-lg p-6">
                        <h2 class="text-xl font-bold text-dark-green mb-6">‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</h2>
                        <div class="overflow-x-auto">
                            <table class="min-w-full bg-white border border-gray-200">
                                <thead class="bg-medium-green text-white">
                                    <tr>
                                        <th class="px-4 py-2 text-left">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</th>
                                        <th class="px-4 py-2 text-center">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏ô‡∏ó‡∏µ‡∏°</th>
                                        <th class="px-4 py-2 text-center">‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏ö‡∏£‡∏°‡πÅ‡∏•‡πâ‡∏ß</th>
                                        <th class="px-4 py-2 text-center">‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏ö‡∏£‡∏°</th>
                                    </tr>
                                </thead>
                                <tbody id="orgSummaryTableBody">
                                    <!-- Organization summary will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Admin - All Officers Database -->
            <div id="allOfficersDB" class="tab-content hidden">
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-bold text-dark-green">‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</h2>
                        <button onclick="showAddOfficerModal()" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏´‡∏°‡πà</button>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="min-w-full bg-white border border-gray-200">
                            <thead class="bg-medium-green text-white">
                                <tr>
                                    <th class="px-4 py-2 text-left">‡∏£‡∏´‡∏±‡∏™‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</th>
                                    <th class="px-4 py-2 text-left">‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•</th>
                                    <th class="px-4 py-2 text-left">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</th>
                                    <th class="px-4 py-2 text-left">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</th>
                                    <th class="px-4 py-2 text-left">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</th>
                                    <th class="px-4 py-2 text-center">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</th>
                                    <th class="px-4 py-2 text-center">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                                </tr>
                            </thead>
                            <tbody id="allOfficersTableBody">
                                <!-- All officers will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Admin - Training Database -->
            <div id="trainingDB" class="tab-content hidden">
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-bold text-dark-green">‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏≠‡∏ö‡∏£‡∏°</h2>
                        <div class="flex space-x-2">
                            <button onclick="showAddYearModal()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏µ</button>
                        </div>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="min-w-full bg-white border border-gray-200">
                            <thead class="bg-medium-green text-white">
                                <tr>
                                    <th class="px-4 py-2 text-left">‡∏£‡∏´‡∏±‡∏™‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</th>
                                    <th class="px-4 py-2 text-left">‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•</th>
                                    <th class="px-4 py-2 text-left">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</th>
                                    <th class="px-4 py-2 text-center">2023</th>
                                    <th class="px-4 py-2 text-center">2024</th>
                                </tr>
                            </thead>
                            <tbody id="trainingTableBody">
                                <!-- Training data will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Admin - Organizations Database -->
            <div id="organizationsDB" class="tab-content hidden">
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-bold text-dark-green">‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</h2>
                        <button onclick="showAddOrgModal()" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</button>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="min-w-full bg-white border border-gray-200">
                            <thead class="bg-medium-green text-white">
                                <tr>
                                    <th class="px-4 py-2 text-left">‡∏£‡∏´‡∏±‡∏™‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</th>
                                    <th class="px-4 py-2 text-left">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</th>
                                    <th class="px-4 py-2 text-left">‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</th>
                                    <th class="px-4 py-2 text-left">‡πÇ‡∏ó‡∏£‡∏™‡∏≤‡∏£</th>
                                    <th class="px-4 py-2 text-left">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</th>
                                    <th class="px-4 py-2 text-center">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</th>
                                    <th class="px-4 py-2 text-center">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                                </tr>
                            </thead>
                            <tbody id="organizationsTableBody">
                                <!-- Organizations will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Admin - User Accounts -->
            <div id="userAccounts" class="tab-content hidden">
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-bold text-dark-green">‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h2>
                        <button onclick="showAddUserModal()" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÉ‡∏´‡∏°‡πà</button>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="min-w-full bg-white border border-gray-200">
                            <thead class="bg-medium-green text-white">
                                <tr>
                                    <th class="px-4 py-2 text-left">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
                                    <th class="px-4 py-2 text-left">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</th>
                                    <th class="px-4 py-2 text-left">Username</th>
                                    <th class="px-4 py-2 text-left">Password</th>
                                    <th class="px-4 py-2 text-left">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á</th>
                                    <th class="px-4 py-2 text-center">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                                </tr>
                            </thead>
                            <tbody id="userAccountsTableBody">
                                <!-- User accounts will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Admin - Activity Log -->
            <div id="activityLog" class="tab-content hidden">
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h2 class="text-xl font-bold text-dark-green mb-6">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h2>
                    <div class="overflow-x-auto">
                        <table class="min-w-full bg-white border border-gray-200">
                            <thead class="bg-medium-green text-white">
                                <tr>
                                    <th class="px-4 py-2 text-left">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                                    <th class="px-4 py-2 text-left">‡πÄ‡∏ß‡∏•‡∏≤</th>
                                    <th class="px-4 py-2 text-left">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</th>
                                    <th class="px-4 py-2 text-left">‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥</th>
                                    <th class="px-4 py-2 text-left">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</th>
                                    <th class="px-4 py-2 text-center">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                                </tr>
                            </thead>
                            <tbody id="activityLogTableBody">
                                <!-- Activity log will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="modalOverlay" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div id="modalContent" class="bg-white rounded-lg shadow-xl max-w-md w-full p-6">
                <!-- Modal content will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // Sample data
        let currentUser = null;
        let userRole = null;
        
        const users = [
            { username: 'officer1', password: 'pass123', name: '‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ', role: 'officer', orgId: 'BMA001' },
            { username: 'admin1', password: 'admin123', name: '‡∏ô‡∏≤‡∏¢‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏• ‡∏£‡∏∞‡∏ö‡∏ö', role: 'admin', orgId: 'BMA000' }
        ];

        const organizations = [
            { id: 'BMA001', name: '‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏Ç‡∏ï‡∏ö‡∏≤‡∏á‡∏£‡∏±‡∏Å', phone: '02-234-5678', fax: '02-234-5679', email: 'bangrak@bma.go.th' },
            { id: 'BMA002', name: '‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏Ç‡∏ï‡∏™‡∏≤‡∏ó‡∏£', phone: '02-234-5680', fax: '02-234-5681', email: 'sathorn@bma.go.th' },
            { id: 'BMA003', name: '‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏Ç‡∏ï‡∏ß‡∏±‡∏í‡∏ô‡∏≤', phone: '02-234-5682', fax: '02-234-5683', email: 'watthana@bma.go.th' },
            { id: 'BMA004', name: '‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏Ç‡∏ï‡∏Ñ‡∏•‡∏≠‡∏á‡πÄ‡∏ï‡∏¢', phone: '02-234-5684', fax: '02-234-5685', email: 'klongtoey@bma.go.th' }
        ];

        const officers = [
            { id: 'OFF001', name: '‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ', phone: '081-234-5678', email: 'somchai@bma.go.th', orgId: 'BMA001' },
            { id: 'OFF002', name: '‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏°‡∏≤‡∏•‡∏µ ‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°', phone: '081-234-5679', email: 'malee@bma.go.th', orgId: 'BMA001' },
            { id: 'OFF003', name: '‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏®‡∏±‡∏Å‡∏î‡∏¥‡πå ‡∏Ç‡∏¢‡∏±‡∏ô', phone: '081-234-5680', email: 'somsak@bma.go.th', orgId: 'BMA002' },
            { id: 'OFF004', name: '‡∏ô‡∏≤‡∏á‡∏™‡∏∏‡∏î‡∏≤ ‡πÄ‡∏Å‡πà‡∏á‡∏Å‡∏≤‡∏à', phone: '081-234-5681', email: 'suda@bma.go.th', orgId: 'BMA002' },
            { id: 'OFF005', name: '‡∏ô‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏±‡∏¢ ‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á', phone: '081-234-5682', email: 'wichai@bma.go.th', orgId: 'BMA002' },
            { id: 'OFF006', name: '‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ô‡∏¥‡∏ï‡∏¢‡∏≤ ‡∏â‡∏•‡∏≤‡∏î', phone: '081-234-5683', email: 'nitaya@bma.go.th', orgId: 'BMA003' },
            { id: 'OFF007', name: '‡∏ô‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏ó‡∏ò‡πå ‡∏£‡∏≠‡∏ö‡∏£‡∏π‡πâ', phone: '081-234-5684', email: 'prayuth@bma.go.th', orgId: 'BMA003' },
            { id: 'OFF008', name: '‡∏ô‡∏≤‡∏á‡∏≠‡∏£‡∏∏‡∏ì‡∏µ ‡∏™‡∏î‡πÉ‡∏™', phone: '081-234-5685', email: 'arunee@bma.go.th', orgId: 'BMA003' },
            { id: 'OFF009', name: '‡∏ô‡∏≤‡∏¢‡∏™‡∏∏‡∏£‡∏ä‡∏±‡∏¢ ‡∏î‡∏µ‡πÄ‡∏î‡πà‡∏ô', phone: '081-234-5686', email: 'surachai@bma.go.th', orgId: 'BMA004' },
            { id: 'OFF010', name: '‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏à ‡∏≠‡πà‡∏≠‡∏ô‡πÇ‡∏¢‡∏ô', phone: '081-234-5687', email: 'pimjai@bma.go.th', orgId: 'BMA004' },
            { id: 'OFF011', name: '‡∏ô‡∏≤‡∏¢‡∏ò‡∏ô‡∏≤‡∏Å‡∏£ ‡πÄ‡∏â‡∏µ‡∏¢‡∏ö‡πÅ‡∏´‡∏•‡∏°', phone: '081-234-5688', email: 'thanakorn@bma.go.th', orgId: 'BMA004' }
        ];

        const trainingData = {
            'OFF001': { '2023': ['‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ö‡∏™‡∏ß‡∏ô'], '2024': ['‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢', '‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ'] },
            'OFF002': { '2023': [], '2024': ['‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ö‡∏™‡∏ß‡∏ô'] },
            'OFF003': { '2023': ['‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢'], '2024': [] },
            'OFF004': { '2023': ['‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ö‡∏™‡∏ß‡∏ô', '‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£'], '2024': ['‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ'] },
            'OFF005': { '2023': ['‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢'], '2024': ['‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ö‡∏™‡∏ß‡∏ô', '‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£'] },
            'OFF006': { '2023': [], '2024': ['‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢'] },
            'OFF007': { '2023': ['‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ'], '2024': ['‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ö‡∏™‡∏ß‡∏ô'] },
            'OFF008': { '2023': ['‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£'], '2024': [] },
            'OFF009': { '2023': ['‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ö‡∏™‡∏ß‡∏ô'], '2024': ['‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢', '‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ'] },
            'OFF010': { '2023': [], '2024': ['‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£'] },
            'OFF011': { '2023': ['‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢', '‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ'], '2024': ['‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ö‡∏™‡∏ß‡∏ô'] }
        };

        const activityLog = [
            { date: '2024-01-15', time: '09:30', user: 'admin1', action: '‡πÄ‡∏û‡∏¥‡πà‡∏°', detail: '‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏´‡∏°‡πà: ‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏®‡∏±‡∏Å‡∏î‡∏¥‡πå ‡∏Ç‡∏¢‡∏±‡∏ô', status: '‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô' },
            { date: '2024-01-14', time: '14:20', user: 'officer1', action: '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç', detail: '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå | ‡πÄ‡∏î‡∏¥‡∏°: 081-234-5678 | ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô: 081-999-8888', status: '‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô' },
            { date: '2024-01-13', time: '16:45', user: 'admin1', action: '‡∏•‡∏ö', detail: '‡∏•‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà: ‡∏ô‡∏≤‡∏¢‡∏ó‡∏î‡∏™‡∏≠‡∏ö ‡∏£‡∏∞‡∏ö‡∏ö (OFF999)', status: '‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö' },
            { date: '2024-01-12', time: '11:20', user: 'officer1', action: '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç', detail: '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏≠‡∏ö‡∏£‡∏° OFF001 ‡∏õ‡∏µ 2024 | ‡πÄ‡∏î‡∏¥‡∏°: ‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢ | ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô: ‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢, ‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ', status: '‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö' },
            { date: '2024-01-11', time: '15:30', user: 'admin1', action: '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç', detail: '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô BMA001 | ‡πÄ‡∏î‡∏¥‡∏°: ‡∏≠‡∏µ‡πÄ‡∏°‡∏• bangrak@bma.go.th | ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô: bangrak.new@bma.go.th', status: '‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô' },
            { date: '2024-01-10', time: '10:15', user: 'officer1', action: '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç', detail: '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà OFF002 | ‡πÄ‡∏î‡∏¥‡∏°: ‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏°‡∏≤‡∏•‡∏µ ‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏° | ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô: ‡∏ô‡∏≤‡∏á‡∏°‡∏≤‡∏•‡∏µ ‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°', status: '‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö' }
        ];

        // Confirmation status for each organization
        const confirmationStatus = {
            'BMA001': { teamConfirmed: false, orgConfirmed: false },
            'BMA002': { teamConfirmed: false, orgConfirmed: false },
            'BMA003': { teamConfirmed: false, orgConfirmed: false },
            'BMA004': { teamConfirmed: false, orgConfirmed: false }
        };

        // Login functionality
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            const user = users.find(u => u.username === username && u.password === password);
            
            if (user) {
                currentUser = user;
                userRole = user.role;
                document.getElementById('loginPage').classList.add('hidden');
                document.getElementById('mainApp').classList.remove('hidden');
                document.getElementById('currentUser').textContent = user.name;
                setupNavigation();
                showDefaultTab();
                logActivity('‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö', '‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
            } else {
                document.getElementById('loginError').textContent = '‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á';
                document.getElementById('loginError').classList.remove('hidden');
            }
        });

        // Logout functionality
        document.getElementById('logoutBtn').addEventListener('click', function() {
            logActivity('‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö', '‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö');
            currentUser = null;
            userRole = null;
            document.getElementById('mainApp').classList.add('hidden');
            document.getElementById('loginPage').classList.remove('hidden');
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            document.getElementById('loginError').classList.add('hidden');
        });

        // Setup navigation based on user role
        function setupNavigation() {
            const navTabs = document.getElementById('navTabs');
            navTabs.innerHTML = '';
            
            if (userRole === 'officer') {
                navTabs.innerHTML = `
                    <button onclick="showTab('officerDashboard')" class="nav-tab px-4 py-2 text-white hover:bg-medium-green rounded">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢‡∏ó‡∏µ‡∏° SRRT</button>
                    <button onclick="showTab('teamManagement')" class="nav-tab px-4 py-2 text-white hover:bg-medium-green rounded">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡∏°</button>
                `;
            } else if (userRole === 'admin') {
                navTabs.innerHTML = `
                    <button onclick="showTab('summaryReport')" class="nav-tab px-4 py-2 text-white hover:bg-medium-green rounded">‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
                    <button onclick="showTab('allOfficersDB')" class="nav-tab px-4 py-2 text-white hover:bg-medium-green rounded">‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</button>
                    <button onclick="showTab('trainingDB')" class="nav-tab px-4 py-2 text-white hover:bg-medium-green rounded">‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏≠‡∏ö‡∏£‡∏°</button>
                    <button onclick="showTab('organizationsDB')" class="nav-tab px-4 py-2 text-white hover:bg-medium-green rounded">‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</button>
                    <button onclick="showTab('userAccounts')" class="nav-tab px-4 py-2 text-white hover:bg-medium-green rounded">‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</button>
                    <button onclick="showTab('activityLog')" class="nav-tab px-4 py-2 text-white hover:bg-medium-green rounded">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
                `;
            }
        }

        // Show tab functionality
        function showTab(tabId) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });
            
            // Remove active class from all nav tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('bg-medium-green');
            });
            
            // Show selected tab
            document.getElementById(tabId).classList.remove('hidden');
            
            // Add active class to clicked nav tab
            event.target.classList.add('bg-medium-green');
            
            // Load data for the tab
            loadTabData(tabId);
        }

        // Show default tab based on user role
        function showDefaultTab() {
            if (userRole === 'officer') {
                showTab('officerDashboard');
            } else if (userRole === 'admin') {
                showTab('summaryReport');
            }
        }

        // Load data for specific tabs
        function loadTabData(tabId) {
            switch(tabId) {
                case 'summaryReport':
                    loadSummaryReportData();
                    break;
                case 'officerDashboard':
                    loadOfficerDashboardData();
                    break;
                case 'teamManagement':
                    loadTeamData();
                    break;
                case 'allOfficersDB':
                    loadAllOfficersData();
                    break;
                case 'trainingDB':
                    loadTrainingData();
                    break;
                case 'organizationsDB':
                    loadOrganizationsData();
                    break;
                case 'userAccounts':
                    loadUserAccountsData();
                    break;
                case 'activityLog':
                    loadActivityLogData();
                    break;
            }
        }

        // Load summary report data
        function loadSummaryReportData() {
            // ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏ó‡∏µ‡∏° SRRT ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£
            const totalTeams = organizations.length;
            const totalOfficers = officers.length;
            
            document.getElementById('totalTeams').textContent = totalTeams;
            document.getElementById('totalOfficers').textContent = totalOfficers;
            
            // ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô
            const tbody = document.getElementById('orgSummaryTableBody');
            tbody.innerHTML = organizations.map(org => {
                const orgOfficers = officers.filter(officer => officer.orgId === org.id);
                const totalMembers = orgOfficers.length;
                
                // ‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏ö‡∏£‡∏° (‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏≠‡∏ö‡∏£‡∏°‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡πÉ‡∏ô‡∏õ‡∏µ‡πÉ‡∏î‡∏õ‡∏µ‡∏´‡∏ô‡∏∂‡πà‡∏á)
                let trainedMembers = 0;
                orgOfficers.forEach(officer => {
                    const training = trainingData[officer.id];
                    if (training) {
                        const hasTraining = Object.values(training).some(courses => courses && courses.length > 0);
                        if (hasTraining) {
                            trainedMembers++;
                        }
                    }
                });
                
                const trainingPercentage = totalMembers > 0 ? Math.round((trainedMembers / totalMembers) * 100) : 0;
                
                return `
                    <tr class="border-b hover:bg-gray-50">
                        <td class="px-4 py-2">${org.name}</td>
                        <td class="px-4 py-2 text-center">${totalMembers}</td>
                        <td class="px-4 py-2 text-center">${trainedMembers}</td>
                        <td class="px-4 py-2 text-center">
                            <div class="flex items-center justify-center">
                                <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                                    <div class="bg-green-500 h-2 rounded-full" style="width: ${trainingPercentage}%"></div>
                                </div>
                                <span class="text-sm font-medium">${trainingPercentage}%</span>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        // Load officer dashboard data
        function loadOfficerDashboardData() {
            const container = document.querySelector('#officerDashboard .bg-white');
            
            // Clear existing content except the header and search section
            const header = container.querySelector('h2');
            const searchSection = container.querySelector('.mb-6.bg-gray-50');
            container.innerHTML = '';
            container.appendChild(header);
            
            // Re-add search section if it exists
            if (searchSection) {
                container.appendChild(searchSection);
            } else {
                // Create search section if it doesn't exist
                const searchDiv = document.createElement('div');
                searchDiv.className = 'mb-6 bg-gray-50 p-4 rounded-lg';
                searchDiv.innerHTML = `
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</label>
                            <input type="text" id="officerSearch" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏à‡∏≤‡∏Å‡∏ä‡∏∑‡πà‡∏≠ ‡∏£‡∏´‡∏±‡∏™‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà ‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô..." class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-medium-green" onkeyup="searchOfficers()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</label>
                            <select id="orgFilter" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-medium-green" onchange="filterOfficers()">
                                <option value="">‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏≠‡∏ö‡∏£‡∏°</label>
                            <select id="trainingFilter" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-medium-green" onchange="filterOfficers()">
                                <option value="">‡∏ó‡∏∏‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</option>
                                <option value="trained">‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏ö‡∏£‡∏°‡πÅ‡∏•‡πâ‡∏ß</option>
                                <option value="not-trained">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏ö‡∏£‡∏°</option>
                            </select>
                        </div>
                    </div>
                `;
                container.appendChild(searchDiv);
            }
            
            // Populate organization filter dropdown
            const orgFilter = document.getElementById('orgFilter');
            if (orgFilter) {
                const existingOptions = orgFilter.querySelectorAll('option:not([value=""])');
                existingOptions.forEach(option => option.remove());
                
                organizations.forEach(org => {
                    const option = document.createElement('option');
                    option.value = org.id;
                    option.textContent = org.name;
                    orgFilter.appendChild(option);
                });
            }
            
            // Group officers by organization
            const officersByOrg = {};
            officers.forEach(officer => {
                if (!officersByOrg[officer.orgId]) {
                    officersByOrg[officer.orgId] = [];
                }
                officersByOrg[officer.orgId].push(officer);
            });
            
            // Create blocks for each organization
            organizations.forEach(org => {
                if (officersByOrg[org.id] && officersByOrg[org.id].length > 0) {
                    const orgBlock = document.createElement('div');
                    orgBlock.className = 'mb-8';
                    orgBlock.innerHTML = `
                        <div class="bg-medium-green text-white p-4 rounded-t-lg">
                            <h3 class="text-lg font-bold">${org.name}</h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-2 text-sm">
                                <div>‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå: ${org.phone}</div>
                                <div>‡πÇ‡∏ó‡∏£‡∏™‡∏≤‡∏£: ${org.fax}</div>
                                <div>‡∏≠‡∏µ‡πÄ‡∏°‡∏•: ${org.email}</div>
                            </div>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="min-w-full bg-white border border-gray-200">
                                <thead class="bg-gray-100">
                                    <tr>
                                        <th class="px-4 py-2 text-left">‡∏£‡∏´‡∏±‡∏™‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</th>
                                        <th class="px-4 py-2 text-left">‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•</th>
                                        <th class="px-4 py-2 text-left">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</th>
                                        <th class="px-4 py-2 text-left">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${officersByOrg[org.id].map(officer => `
                                        <tr class="border-b hover:bg-gray-50">
                                            <td class="px-4 py-2">${officer.id}</td>
                                            <td class="px-4 py-2">${officer.name}</td>
                                            <td class="px-4 py-2">${officer.phone}</td>
                                            <td class="px-4 py-2">${officer.email}</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    `;
                    container.appendChild(orgBlock);
                }
            });
        }

        // Load team data
        function loadTeamData() {
            const tbody = document.getElementById('teamTableBody');
            const userOrg = currentUser.orgId;
            const teamMembers = officers.filter(officer => officer.orgId === userOrg);
            const org = organizations.find(o => o.id === userOrg);
            
            // Calculate team summary
            const totalMembers = teamMembers.length;
            let trainedMembers = 0;
            
            teamMembers.forEach(officer => {
                const training = trainingData[officer.id];
                if (training) {
                    const hasTraining = Object.values(training).some(courses => courses && courses.length > 0);
                    if (hasTraining) {
                        trainedMembers++;
                    }
                }
            });
            
            const trainingPercentage = totalMembers > 0 ? Math.round((trainedMembers / totalMembers) * 100) : 0;
            
            // Update summary display
            document.getElementById('teamTotalMembers').textContent = totalMembers;
            document.getElementById('teamTrainedMembers').textContent = trainedMembers;
            document.getElementById('teamTrainingPercentage').textContent = trainingPercentage;
            document.getElementById('teamProgressText').textContent = `${trainedMembers}/${totalMembers} ‡∏Ñ‡∏ô`;
            document.getElementById('teamProgressBar').style.width = `${trainingPercentage}%`;
            
            // Update confirmation status display
            updateConfirmationStatusDisplay();
            
            // Update confirmation status display
            updateConfirmationStatusDisplay();
            
            tbody.innerHTML = teamMembers.map(officer => `
                <tr class="border-b hover:bg-gray-50">
                    <td class="px-4 py-2">${officer.id}</td>
                    <td class="px-4 py-2">${officer.name}</td>
                    <td class="px-4 py-2">${org ? org.name : '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏'}</td>
                    <td class="px-4 py-2">${officer.phone}</td>
                    <td class="px-4 py-2">${officer.email}</td>
                    <td class="px-4 py-2 text-center">
                        <button onclick="showOfficerTrainingHistory('${officer.id}')" class="bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏≠‡∏ö‡∏£‡∏°</button>
                    </td>
                    <td class="px-4 py-2 text-center">
                        <button onclick="editMember('${officer.id}')" class="bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600 mr-1">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                        <button onclick="deleteMember('${officer.id}')" class="bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600">‡∏•‡∏ö</button>
                    </td>
                </tr>
            `).join('');
        }

        // Load all officers data
        function loadAllOfficersData() {
            const tbody = document.getElementById('allOfficersTableBody');
            tbody.innerHTML = officers.map(officer => {
                const org = organizations.find(o => o.id === officer.orgId);
                const confirmStatus = confirmationStatus[officer.orgId];
                let statusDisplay = '';
                let statusAction = '';
                
                if (confirmStatus && confirmStatus.teamConfirmed) {
                    statusDisplay = '<span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß</span>';
                    statusAction = `<button onclick="resetTeamConfirmation('${officer.orgId}')" class="bg-orange-500 text-white px-2 py-1 rounded text-xs hover:bg-orange-600 ml-1">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>`;
                } else {
                    statusDisplay = '<span class="bg-gray-100 text-gray-600 px-2 py-1 rounded text-xs">‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</span>';
                }
                
                return `
                    <tr class="border-b hover:bg-gray-50">
                        <td class="px-4 py-2">${officer.id}</td>
                        <td class="px-4 py-2">${officer.name}</td>
                        <td class="px-4 py-2">${org ? org.name : '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏'}</td>
                        <td class="px-4 py-2">${officer.phone}</td>
                        <td class="px-4 py-2">${officer.email}</td>
                        <td class="px-4 py-2 text-center">
                            ${statusDisplay}
                            ${statusAction}
                        </td>
                        <td class="px-4 py-2 text-center">
                            <button onclick="editOfficer('${officer.id}')" class="bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600 mr-1">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                            <button onclick="deleteOfficer('${officer.id}')" class="bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600">‡∏•‡∏ö</button>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        // Load training data
        function loadTrainingData() {
            const tbody = document.getElementById('trainingTableBody');
            tbody.innerHTML = officers.map(officer => {
                const org = organizations.find(o => o.id === officer.orgId);
                const training2023 = trainingData[officer.id]?.['2023']?.length > 0 ? '‚úì' : '';
                const training2024 = trainingData[officer.id]?.['2024']?.length > 0 ? '‚úì' : '';
                
                return `
                    <tr class="border-b hover:bg-gray-50">
                        <td class="px-4 py-2">${officer.id}</td>
                        <td class="px-4 py-2">${officer.name}</td>
                        <td class="px-4 py-2">${org ? org.name : '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏'}</td>
                        <td class="px-4 py-2 text-center cursor-pointer hover:bg-blue-100" onclick="showTrainingModal('${officer.id}', '2023')">${training2023}</td>
                        <td class="px-4 py-2 text-center cursor-pointer hover:bg-blue-100" onclick="showTrainingModal('${officer.id}', '2024')">${training2024}</td>
                    </tr>
                `;
            }).join('');
        }

        // Load organizations data
        function loadOrganizationsData() {
            const tbody = document.getElementById('organizationsTableBody');
            tbody.innerHTML = organizations.map(org => {
                const confirmStatus = confirmationStatus[org.id];
                let statusDisplay = '';
                let statusAction = '';
                
                if (confirmStatus && confirmStatus.orgConfirmed) {
                    statusDisplay = '<span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß</span>';
                    statusAction = `<button onclick="resetOrgConfirmation('${org.id}')" class="bg-orange-500 text-white px-2 py-1 rounded text-xs hover:bg-orange-600 ml-1">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>`;
                } else {
                    statusDisplay = '<span class="bg-gray-100 text-gray-600 px-2 py-1 rounded text-xs">‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</span>';
                }
                
                return `
                    <tr class="border-b hover:bg-gray-50">
                        <td class="px-4 py-2">${org.id}</td>
                        <td class="px-4 py-2">${org.name}</td>
                        <td class="px-4 py-2">${org.phone}</td>
                        <td class="px-4 py-2">${org.fax}</td>
                        <td class="px-4 py-2">${org.email}</td>
                        <td class="px-4 py-2 text-center">
                            ${statusDisplay}
                            ${statusAction}
                        </td>
                        <td class="px-4 py-2 text-center">
                            <button onclick="editOrganization('${org.id}')" class="bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600 mr-1">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                            <button onclick="deleteOrganization('${org.id}')" class="bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600">‡∏•‡∏ö</button>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        // Load user accounts data
        function loadUserAccountsData() {
            const tbody = document.getElementById('userAccountsTableBody');
            tbody.innerHTML = users.map(user => {
                const org = organizations.find(o => o.id === user.orgId);
                return `
                    <tr class="border-b hover:bg-gray-50">
                        <td class="px-4 py-2">${user.name}</td>
                        <td class="px-4 py-2">${org ? org.name : '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏'}</td>
                        <td class="px-4 py-2">${user.username}</td>
                        <td class="px-4 py-2">${user.password}</td>
                        <td class="px-4 py-2">${user.role === 'admin' ? '‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö' : '‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà'}</td>
                        <td class="px-4 py-2 text-center">
                            <button onclick="editUser('${user.username}')" class="bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600 mr-1">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                            <button onclick="deleteUser('${user.username}')" class="bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600">‡∏•‡∏ö</button>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        // Load activity log data
        function loadActivityLogData() {
            const tbody = document.getElementById('activityLogTableBody');
            // Filter only add, edit, delete, confirm, reset actions
            const filteredLog = activityLog.filter(log => 
                log.action === '‡πÄ‡∏û‡∏¥‡πà‡∏°' || log.action === '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç' || log.action === '‡∏•‡∏ö' || log.action === '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô' || log.action === '‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï'
            );
            
            tbody.innerHTML = filteredLog.map((log, index) => `
                <tr class="border-b hover:bg-gray-50">
                    <td class="px-4 py-2">${log.date}</td>
                    <td class="px-4 py-2">${log.time}</td>
                    <td class="px-4 py-2">${log.user}</td>
                    <td class="px-4 py-2">${log.action}</td>
                    <td class="px-4 py-2">${log.detail}</td>
                    <td class="px-4 py-2 text-center">
                        ${log.status === '‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô' ? 
                            `<button onclick="acknowledgeActivity(${index})" class="bg-orange-500 text-white px-3 py-1 rounded text-sm hover:bg-orange-600">‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>` :
                            `<span class="bg-green-100 text-green-800 px-3 py-1 rounded text-sm">‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö</span>`
                        }
                    </td>
                </tr>
            `).join('');
        }

        // Modal functions
        function showModal(content) {
            document.getElementById('modalContent').innerHTML = content;
            document.getElementById('modalOverlay').classList.remove('hidden');
        }

        function hideModal() {
            document.getElementById('modalOverlay').classList.add('hidden');
        }

        // Click outside modal to close
        document.getElementById('modalOverlay').addEventListener('click', function(e) {
            if (e.target === this) {
                hideModal();
            }
        });

        // Officer training history modal
        function showOfficerTrainingHistory(officerId) {
            const officer = officers.find(o => o.id === officerId);
            const training = trainingData[officerId] || {};
            
            let totalCourses = 0;
            let trainingHistory = [];
            
            Object.keys(training).forEach(year => {
                const courses = training[year];
                if (courses && courses.length > 0) {
                    totalCourses += courses.length;
                    trainingHistory.push(`‡∏õ‡∏µ ${year} (${courses.join(', ')})`);
                }
            });
            
            const historyText = trainingHistory.length > 0 ? trainingHistory.join(', ') : '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏ö‡∏£‡∏°';
            
            const content = `
                <h3 class="text-lg font-bold text-dark-green mb-4">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏ö‡∏£‡∏°</h3>
                <p class="mb-4"><strong>‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:</strong> ${officer.name}</p>
                <div class="mb-4 p-4 bg-gray-50 rounded">
                    <p class="text-sm text-gray-700 mb-2">‡∏ó‡πà‡∏≤‡∏ô‡πÄ‡∏Ñ‡∏¢‡πÄ‡∏Ç‡πâ‡∏≤‡∏≠‡∏ö‡∏£‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î <strong>${totalCourses}</strong> ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</p>
                    <p class="text-sm text-gray-700">${historyText}</p>
                </div>
                <div class="flex justify-end">
                    <button onclick="hideModal()" class="px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400">‡∏õ‡∏¥‡∏î</button>
                </div>
            `;
            showModal(content);
        }

        // Training modal
        function showTrainingModal(officerId, year) {
            const officer = officers.find(o => o.id === officerId);
            const courses = trainingData[officerId]?.[year] || [];
            
            const content = `
                <h3 class="text-lg font-bold text-dark-green mb-4">‡∏Å‡∏≤‡∏£‡∏≠‡∏ö‡∏£‡∏°‡∏õ‡∏µ ${year}</h3>
                <p class="mb-4"><strong>‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:</strong> ${officer.name}</p>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏≠‡∏ö‡∏£‡∏°</label>
                    <textarea id="trainingCourses" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-medium-green" rows="4" placeholder="‡πÉ‡∏™‡πà‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏≠‡∏ö‡∏£‡∏° (‡πÅ‡∏¢‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÉ‡∏´‡∏°‡πà)">${courses.join('\n')}</textarea>
                </div>
                <div class="flex justify-end space-x-2">
                    <button onclick="hideModal()" class="px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button onclick="saveTraining('${officerId}', '${year}')" class="px-4 py-2 bg-medium-green text-white rounded hover:bg-dark-green">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                </div>
            `;
            showModal(content);
        }

        function saveTraining(officerId, year) {
            const courses = document.getElementById('trainingCourses').value.split('\n').filter(course => course.trim() !== '');
            
            // Get old value for logging
            const oldCourses = trainingData[officerId]?.[year] || [];
            const oldValue = oldCourses.length > 0 ? oldCourses.join(', ') : '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•';
            const newValue = courses.length > 0 ? courses.join(', ') : '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•';
            
            if (!trainingData[officerId]) {
                trainingData[officerId] = {};
            }
            trainingData[officerId][year] = courses;
            
            logActivity('‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç', `‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏≠‡∏ö‡∏£‡∏° ${officerId} ‡∏õ‡∏µ ${year}`, oldValue, newValue);
            hideModal();
            loadTrainingData();
        }

        // Save functions
        function saveOrgInfo() {
            const phone = document.getElementById('editPhone').value;
            const fax = document.getElementById('editFax').value;
            const email = document.getElementById('editEmail').value;
            
            // Find current organization
            const userOrg = organizations.find(org => org.id === currentUser.orgId);
            
            // Log changes for each field that was modified
            if (userOrg) {
                if (phone !== userOrg.phone) {
                    logActivity('‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç', `‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô ${userOrg.id}`, userOrg.phone, phone);
                    userOrg.phone = phone;
                }
                if (fax !== userOrg.fax) {
                    logActivity('‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç', `‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏ó‡∏£‡∏™‡∏≤‡∏£‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô ${userOrg.id}`, userOrg.fax, fax);
                    userOrg.fax = fax;
                }
                if (email !== userOrg.email) {
                    logActivity('‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç', `‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô ${userOrg.id}`, userOrg.email, email);
                    userOrg.email = email;
                }
            }
            
            alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
        }

        // Log activity
        function logActivity(action, detail, oldValue = null, newValue = null) {
            // Only log add, edit, delete, confirm, reset actions
            if (action === '‡πÄ‡∏û‡∏¥‡πà‡∏°' || action === '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç' || action === '‡∏•‡∏ö' || action === '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô' || action === '‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï') {
                const now = new Date();
                const date = now.toISOString().split('T')[0];
                const time = now.toTimeString().split(' ')[0].substring(0, 5);
                
                let formattedDetail = detail;
                
                // For edit actions, format with old and new values
                if (action === '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç' && oldValue !== null && newValue !== null) {
                    formattedDetail = `${detail} | ‡πÄ‡∏î‡∏¥‡∏°: ${oldValue} | ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô: ${newValue}`;
                }
                
                activityLog.unshift({
                    date: date,
                    time: time,
                    user: currentUser ? currentUser.username : 'system',
                    action: action,
                    detail: formattedDetail,
                    status: '‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô'
                });
            }
        }

        // Acknowledge activity function
        function acknowledgeActivity(index) {
            const filteredLog = activityLog.filter(log => 
                log.action === '‡πÄ‡∏û‡∏¥‡πà‡∏°' || log.action === '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç' || log.action === '‡∏•‡∏ö' || log.action === '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô' || log.action === '‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï'
            );
            
            if (filteredLog[index] && filteredLog[index].status === '‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô') {
                // Find the original log entry and update it
                const originalIndex = activityLog.findIndex(log => 
                    log.date === filteredLog[index].date && 
                    log.time === filteredLog[index].time && 
                    log.detail === filteredLog[index].detail
                );
                
                if (originalIndex !== -1) {
                    activityLog[originalIndex].status = '‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö';
                    loadActivityLogData(); // Refresh the table
                }
            }
        }

        // Search and filter functions
        function searchOfficers() {
            filterOfficers();
        }
        
        function filterOfficers() {
            const searchTerm = document.getElementById('officerSearch')?.value.toLowerCase() || '';
            const orgFilter = document.getElementById('orgFilter')?.value || '';
            const trainingFilter = document.getElementById('trainingFilter')?.value || '';
            
            const orgBlocks = document.querySelectorAll('#officerDashboard .mb-8');
            
            orgBlocks.forEach(block => {
                const rows = block.querySelectorAll('tbody tr');
                let hasVisibleRows = false;
                
                rows.forEach(row => {
                    const officerId = row.cells[0]?.textContent || '';
                    const officerName = row.cells[1]?.textContent || '';
                    const orgName = row.cells[2]?.textContent || '';
                    
                    // Get officer data for training filter
                    const officer = officers.find(o => o.id === officerId);
                    let hasTraining = false;
                    if (officer && trainingData[officer.id]) {
                        hasTraining = Object.values(trainingData[officer.id]).some(courses => courses && courses.length > 0);
                    }
                    
                    // Apply filters
                    let showRow = true;
                    
                    // Search filter
                    if (searchTerm) {
                        const searchText = `${officerId} ${officerName} ${orgName}`.toLowerCase();
                        if (!searchText.includes(searchTerm)) {
                            showRow = false;
                        }
                    }
                    
                    // Organization filter
                    if (orgFilter && officer && officer.orgId !== orgFilter) {
                        showRow = false;
                    }
                    
                    // Training status filter
                    if (trainingFilter) {
                        if (trainingFilter === 'trained' && !hasTraining) {
                            showRow = false;
                        } else if (trainingFilter === 'not-trained' && hasTraining) {
                            showRow = false;
                        }
                    }
                    
                    row.style.display = showRow ? '' : 'none';
                    if (showRow) hasVisibleRows = true;
                });
                
                // Hide/show entire organization block if no visible rows
                block.style.display = hasVisibleRows ? '' : 'none';
            });
        }
        
        // Confirmation functions
        function updateConfirmationStatusDisplay() {
            const userOrg = currentUser.orgId;
            const status = confirmationStatus[userOrg];
            
            // Update team confirmation status
            const teamStatusEl = document.getElementById('teamConfirmStatus');
            const orgStatusEl = document.getElementById('orgConfirmStatus');
            const confirmBtn = document.getElementById('confirmTeamDataBtn');
            
            if (teamStatusEl) {
                if (status.teamConfirmed) {
                    teamStatusEl.textContent = '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß';
                    teamStatusEl.className = 'inline-block px-3 py-1 rounded text-sm font-medium bg-green-100 text-green-800';
                } else {
                    teamStatusEl.textContent = '‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô';
                    teamStatusEl.className = 'inline-block px-3 py-1 rounded text-sm font-medium bg-gray-100 text-gray-600';
                }
            }
            
            if (orgStatusEl) {
                if (status.orgConfirmed) {
                    orgStatusEl.textContent = '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß';
                    orgStatusEl.className = 'inline-block px-3 py-1 rounded text-sm font-medium bg-green-100 text-green-800';
                } else {
                    orgStatusEl.textContent = '‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô';
                    orgStatusEl.className = 'inline-block px-3 py-1 rounded text-sm font-medium bg-gray-100 text-gray-600';
                }
            }
            
            // Update button state
            if (confirmBtn) {
                if (status.teamConfirmed && status.orgConfirmed) {
                    confirmBtn.textContent = '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß';
                    confirmBtn.disabled = true;
                    confirmBtn.className = 'bg-gray-400 text-white px-6 py-2 rounded cursor-not-allowed';
                } else {
                    confirmBtn.textContent = '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•';
                    confirmBtn.disabled = false;
                    confirmBtn.className = 'bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700';
                }
            }
        }
        
        function confirmTeamData() {
            const userOrg = currentUser.orgId;
            
            if (confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡∏°‡πÅ‡∏•‡∏∞‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                confirmationStatus[userOrg].teamConfirmed = true;
                confirmationStatus[userOrg].orgConfirmed = true;
                
                logActivity('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô', `‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡∏°‡πÅ‡∏•‡∏∞‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô ${userOrg}`);
                updateConfirmationStatusDisplay();
                
                alert('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö');
            }
        }
        
        function resetTeamConfirmation(orgId) {
            if (confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                confirmationStatus[orgId].teamConfirmed = false;
                logActivity('‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï', `‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡∏° ${orgId}`);
                loadAllOfficersData();
                alert('‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
            }
        }
        
        function resetOrgConfirmation(orgId) {
            if (confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                confirmationStatus[orgId].orgConfirmed = false;
                logActivity('‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï', `‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô ${orgId}`);
                loadOrganizationsData();
                alert('‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
            }
        }
        
        // Confirmation functions
        function updateConfirmationStatusDisplay() {
            const userOrg = currentUser.orgId;
            const status = confirmationStatus[userOrg];
            
            // Update team confirmation status
            const teamStatusEl = document.getElementById('teamConfirmStatus');
            const orgStatusEl = document.getElementById('orgConfirmStatus');
            const confirmBtn = document.getElementById('confirmTeamDataBtn');
            
            if (teamStatusEl) {
                if (status.teamConfirmed) {
                    teamStatusEl.textContent = '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß';
                    teamStatusEl.className = 'inline-block px-3 py-1 rounded text-sm font-medium bg-green-100 text-green-800';
                } else {
                    teamStatusEl.textContent = '‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô';
                    teamStatusEl.className = 'inline-block px-3 py-1 rounded text-sm font-medium bg-gray-100 text-gray-600';
                }
            }
            
            if (orgStatusEl) {
                if (status.orgConfirmed) {
                    orgStatusEl.textContent = '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß';
                    orgStatusEl.className = 'inline-block px-3 py-1 rounded text-sm font-medium bg-green-100 text-green-800';
                } else {
                    orgStatusEl.textContent = '‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô';
                    orgStatusEl.className = 'inline-block px-3 py-1 rounded text-sm font-medium bg-gray-100 text-gray-600';
                }
            }
            
            // Update button state
            if (confirmBtn) {
                if (status.teamConfirmed && status.orgConfirmed) {
                    confirmBtn.textContent = '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß';
                    confirmBtn.disabled = true;
                    confirmBtn.className = 'bg-gray-400 text-white px-6 py-2 rounded cursor-not-allowed';
                } else {
                    confirmBtn.textContent = '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•';
                    confirmBtn.disabled = false;
                    confirmBtn.className = 'bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700';
                }
            }
        }
        
        function confirmTeamData() {
            const userOrg = currentUser.orgId;
            
            if (confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡∏°‡πÅ‡∏•‡∏∞‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                confirmationStatus[userOrg].teamConfirmed = true;
                confirmationStatus[userOrg].orgConfirmed = true;
                
                logActivity('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô', `‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡∏°‡πÅ‡∏•‡∏∞‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô ${userOrg}`);
                updateConfirmationStatusDisplay();
                
                alert('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö');
            }
        }
        
        function resetTeamConfirmation(orgId) {
            if (confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                confirmationStatus[orgId].teamConfirmed = false;
                logActivity('‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï', `‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡∏° ${orgId}`);
                loadAllOfficersData();
                alert('‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
            }
        }
        
        function resetOrgConfirmation(orgId) {
            if (confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                confirmationStatus[orgId].orgConfirmed = false;
                logActivity('‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï', `‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô ${orgId}`);
                loadOrganizationsData();
                alert('‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
            }
        }
        
        // Placeholder functions for other modals and operations
        function showAddMemberModal() { alert('‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏´‡∏°‡πà'); }
        function showAddOfficerModal() { alert('‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏´‡∏°‡πà'); }
        function showAddYearModal() { alert('‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏µ‡πÉ‡∏´‡∏°‡πà'); }
        function showAddOrgModal() { alert('‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà'); }
        function showAddUserModal() { alert('‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÉ‡∏´‡∏°‡πà'); }
        function editMember(id) { alert('‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å: ' + id); }
        function deleteMember(id) { alert('‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏•‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å: ' + id); }
        function editOfficer(id) { alert('‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà: ' + id); }
        function deleteOfficer(id) { alert('‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏•‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà: ' + id); }
        function editOrganization(id) { alert('‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô: ' + id); }
        function deleteOrganization(id) { alert('‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏•‡∏ö‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô: ' + id); }
        function editUser(username) { alert('‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ: ' + username); }
        function deleteUser(username) { alert('‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ: ' + username); }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9840a241618b45b3',t:'MTc1ODY5OTYyOC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
